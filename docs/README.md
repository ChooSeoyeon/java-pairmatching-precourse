# 기능 구현 목록 - 페어매칭관리 애플리케이션

## 🗂️ Model

### MatchingManager (매칭 담당자)

- [x] 매칭을 진행한다
    - [ ] 이전 매칭 결과를 확인한다
    - [x] 매칭 결과를 반환한다

### MatchingHistory (매칭 기록자)

- [ ] 모든 이전 매칭 결과를 지운다
- [x] 새로운 매칭 결과를 저장한다
    - [x] 이미 존재하는 특정 매칭 기록을 지운다
- [ ] 과정/레벨/미션으로 이전 매칭 결과를 조회한다
- [ ] 과정/레벨으로 이전 매칭 결과 존재 유무를 조회한다
- [ ] 과정/레벨으로 이전 매칭 결과 리스트를 조회한다

## 📝 Enum

### Course (과정)

- [x] 과정을 정의한다

### Level (레벨)

- [x] 레벨을 정의한다

### Mission (미션)

- [x] 레벨 별 미션을 정의한다

### Function (기능)

- [x] 기능을 정의한다

## 👩🏻‍💻 View

### InputView

- [x] `원하는 기능을 입력` 받는다 (`String` → `Function(enum)`)
    - [x] `존재하는 기능이 아닌 경우`, 예외를 발생시킨다
- [x] `과정, 레벨, 미션을` 쉼표로 구분해 `입력` 받는다 (`String` → `Target(dto)`)
    - [x] `존재하지 않는 과정, 레벨, 미션인 경우`, 예외를 발생시킨다
- [ ] `재매칭 여부를 입력` 받는다 (`String` → `boolean`)
    - [ ] `네` 또는 `아니오`가 아닌 경우, 예외를 발생시킨다

### OutputView

- [ ] `기능 선택 문구`를 출력한다
- [ ] `과정, 레벨, 미션 선택 문구`를 출력한다
- [ ] `재매칭 선택 문구`를 출력한다
- [ ] `예외 메시지`를 출력한다
- [ ] `패어 매칭 결과`를 출력한다
- [ ] `페어 조회 결과`를 출력한다
- [ ] `페어 초기화 결과`를 출력한다

## 📡 Controller

### PairMatchingController

- [x]  `페어매칭관리를 시작`한다
    - [x]  크루를 세팅한다
    - [x]  `기능을 입력` 받는다
        - [ ]  `페어 매칭 기능`을 시작한다
        - [ ]  `페어 조회 기능`를 시작한다
        - [ ]  `페어 초기화 기능`를 시작한다
        - [ ]  `페어매칭관리를 종료 기능`을 시작한다

## 🔑 Exception

### ErrorCode → Enum

- [x] 예외 메시지를 제공한다.

### PairIllegalArgumentException

- [x] 예외 메시지를 담아 외부 예외를 커스텀한다.

### PairIllegalStateException

- [x] 예외 메시지를 담아 내부 예외를 커스텀한다.

# 부록

## 요구사항 정리

- 기능 요구사항
    - 프로그램 이름 : 미션 함께할 페어 관리해주는 애플리케이션, 페어매칭관리 애플리케이션
    - 도메인 :
        - 백엔드/프론트엔드 과정
        - 각 과정마다 5레벨
        - 미션 수행하며 페어 매칭 진행
        - 미션 시작 전 페어를 매칭
        - 같은 레벨의 미션들에선 같은 페어 만나지 않음 (한 레벨에 여러 미션 존재)
    - 페어 매칭 기능 :
        - 페어 매칭 조건 : 두 명씩 매칭, 인원 남으면 한 페어는 3명 매칭, 같은 레벨에서 이전 크루와 다시 매칭 불가
        - 페어 매칭 구현 :
            - 크루 이름 목록 준비하기 (List<String>)
            - 크루 목록 랜덤으로 섞기 (shuffle)
            - 매칭 시도
                - 앞에서부터 순서대로 두 명씩 페어 맺기
                - 홀수인 경우 마지막 크루는 마지막 페어에 포함시키기
                - 중복 매칭이었다면, 랜덤으로 섞는 것부터 다시하기 (재매칭 시도 -> 아니오 선택했다면 코스, 레벨, 미션 다시 선택)
                - 3회 시도까지 매칭 되지 않거나 매칭 할 수 있는 경우의 수가 없으면 에러 메시지 출력 (!!)
    - 페어 조회 기능 :
        - 과정, 레벨, 미션 선택 -> 해당 미션의 페어 정보 출력 (매칭 이력 없을 수 있음)
- 프로그래밍 요구사항
    - depth 2까지, 3항 연산자 불가, 15라인 이하, 함수는 한 가지 일, else 금지, switch case 금지
    - Randoms.shuffle(), Colsole.readLine() 활용
    - 필수 테스트 : 짝수 인원 페어 매칭 가능, 없는 미션은 예외 처리

## 스토리텔링식 설계

- 이야기 : 플로우
    - 포비, 팀장+학생+왕, 매칭 담당자, 매칭 기록자가 있음
    - 포비가 팀장한테 왜 찾아왔냐고 물어봄
        - 팀장이 (1) 백엔드, 레벨1, 자동차경주 에 대해 매칭을 해달라 요청함
            - 포비가 매칭 기록자에게 혹시 이전 매칭 결과 있는지 물어봄
                - 매칭 기록자가 없다고 함
            - 포비가 매칭 담당자한테 매칭하라고 요청함
                - 매칭 담당자가 매칭 기록자에게 동일 선상 다른 미션의 이전 매칭 결과 달라 요청함
                    - 매칭 기록자가 이전 매칭 결과 전달함
                        - 매칭 담당자가 매칭을 진행하고 그 결과를 매칭 기록자와 포비한테 전달함
                            - 포비가 팀장에게 매칭 결과를 전달함
    - 포비가 다른 팀장한테도 왜 찾아왔냐고 물어봄
        - 이번 팀장도 (1) 백엔드, 레벨1, 자동차경주 에 대한 매칭을 해달라고 똑같이 요청함
            - 포비가 매칭 기록자한테 이전 매칭 결과 있는지 물어봄
                - 매칭 기록자가 있다고 함
                    - 포비가 팀장한테 이전 결과 있는데 괜찮냐고 물어봄
                        - 팀장이 싫다고 매칭 해달라고 다시 요청함
            - 포비가 매칭 담당자한테 매칭하라고 요청함
                - 이하 동일 부분 생략
    - 포비가 학생한테 왜 찾아왔냐고 물어봄
        - 학생이 (2) 자기가 매칭된 결과를 보고 싶다고 요청함
            - 포비가 매칭 기록자한테 이전 매칭 결과 있는지 물어봄
                - 매칭 기록자가 있다고 함
                    - 포비가 학생한테 매칭 결과를 전달함
    - 포비가 왕한테 왜 찾아왔냐고 물어봄
        - 왕이 마음에 안드니 전부 초기화해달라고 요청함
            - 포비가 매칭 기록자한테 이전 매칭 결과 전부 초기화해달라고 요청함
                - 매칭 기록자가 초기화함
    - 포비가 왕한테 왜 아직 안가냐고 물어봄
        - 왕이 매칭 시스템 그만하자고 말함
- 협력 : 요청과 응답
    - 이야기로 대체
- 책임 : 하는 것과 아는 것
    - 포비
        - 하는 것 : 어떤 거 원하는지 물어봄, 결과를 요청하고 받음
        - 아는 것 : 매칭 담당자와 매칭 기록자가 누구인지, 어떤 코스/레벨/미션이 있는지
    - 매칭 담당자
        - 하는 것 : 매칭을 진행함(이전 매칭 결과 참고해야 함)
        - 아는 것 : 어떤 학생들이 있는지(그 학생들이 속한 크루까지), 매칭 기록자가 누구인지
    - 매칭 기록자
        - 하는 것 :
            - 전체 매칭을 초기화함
            - 같은 과정/레벨/미션의 이전 매칭이 있는지 유무 알려줌
            - 같은 과정/레벨/미션의 이전 매칭 결과 알려줌
            - 같은 과정/레벨의 다른 미션들의 매칭 결과 알려줌
        - 아는 것 : 이전 매칭 기록들
- 역할 : 책임의 집합
    - 포비 -> 컨트롤러
    - 매칭 담당자 -> MatchManager
    - 매칭 기록자 -> MatchHistory

## 메모

- 매칭 담당자가 매칭 진행할 때 주의할 점
    - 같은 레벨에서 이전 크루와 다시 매칭 불가
    - 어떻게 대처할까?
        - 매칭 담당자가 매칭 진행할 때 같은 과정/레벨의 다른 미션들의 매칭 결과 확인하고,
        - 동일한 쌍 안나오게 하기 (쌍 : 크루 2명 내지 3명)
- 매칭 결과는 어떤 형태로 저장할지
  - 
- 예외 처리
    - 내부 예외
        - 조회 시, 매칭 이력 없을 때
        - 매칭 시, 3회 시도까지 매칭 안됐을 때
        - 매칭 시, 매칭 할 수 있는 경우의 수가 없을 때
    - 외부 예외 (사용자가 값 잘못 입력)
        - 사용자가 코스, 레벨, 미션 잘못 입력했을 때
        - 사용자가 기능 잘못 입력했을 때
        - 사용자가 네|아니오 잘못 입력했을 때